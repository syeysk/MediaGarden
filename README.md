# LibraryStorageScanner - Сканер хранилища книг

## Преимущества

1. Программа не меняет структуру файлов и не копирует их
2. Вы вольны переименовывать и перемещать файлы, добавлять новые и удалять старые как обычно. Затем просто зайдите в Программу и запустите сканирование для обновления базы.
3. Экспорт постраничного списка книг в хранилище заметок. Открывайте список в Obsidian: делайте заметки к книгам, пишите изложения и рецензии.
4. Помечайте книги тегами, фильтруйте по тегам.

## Графический интерфейс

### Заметки

### Теги

Управление аналогично управлению узлами в программе [Freeplane](https://github.com/freeplane/freeplane).

- [ ] double-click - редактирование имени тега
- [ ] tab - добавление тега, дочернего к выделенному
- [ ] enter - добавление тега, братского к выделенному
- [ ] shift+tab - добавление тега, родительского к выделенному
- [ ] down - выделение нижнего братского тега
- [ ] up - выделение верхнего братского тега
- [ ] left - выделение дочернего тега
- [ ] right - выделение родительского тега

## Интерфейс командной строки

### Заметки

- [ ] `export` - экспорт базы в заметки (список книг, список тегов)
- [ ] `import` - импорт базы из заметок (список книг, список тегов)

### Теги

- [x] `tag` - показать все теги
- [x] `tag <id>` - показать имя и родителя тега с идентификатором <id>
- [x] `tagadd <name>` - добавить новый тег с именем <name>
- [x] `tagadd -p <parent_id> <name>` - добавить новый тег с именем <name>, указав родителя <parent_id>
- [ ] `tagmod <id> -p <parent_id>` - изменить родителя для тега с идентификатором <id>
- [ ] `tagmod <id> -n <parent_id>` - изменить имя тега с идентификатором <id>



## Как работает программа

Удалённые с диска файлы не удаляются из базы данных. Если это сделать, то при добавлении вновь он изменит свой идентификатор, что сделает в заметках ссылки на него невалидными.
Также, если изменить файл, то он воспримется как новый, а старая версия файла будет считаться удалённой, при этом в базе останется запись об этой версии.

## Using

1. Просканируйте оригинальное хранилище:
    ```sh
    syeysk-stor scan --path <path/to/original_storage> --struct <struct.csv>
    ```
    где `--path` - оригинальное хранилище, которое будет просканировано, `--struct` - файл, куда запишется структура хранилища.

2. Просканируйте копию хранилища (в которую Вы могли добавить новые файлы):
    ```sh
    syeysk-stor makediff --path <path/to/copy_storage> --struct <struct.csv> --diff <diff_of_copy_storage>
    ```
    где `--path` - копия хранилища, `--struct` - файл со структурой оригинального хранилища, `--diff` - куда запишется diff-файл с изменениями в копии относительно оригинала 

3. Примените изменния из копии хранилища в оригинальное хранилище:
    ```sh
    syeysk-stor applydiff --path <path/to/original_storage> --diff <diff_of_copy_storage>
    ```
    где `--path` - оригинальное хранилище, `--diff` - diff-файл копии хранилища

После этого оринальное хранилище будет соответствовать копии.